<html><head><title>PlugIns.JdbcSlim.UserGuide.7UsingSqlInScriptsAndScenarios.SymbolAssignmentOfResults</title><meta http-equiv='Content-Type' content='text/html;charset=UTF-8'/><link rel='stylesheet' type='text/css' href='css/fitnesse.css'/><script src='javascript/jquery-1.11.3.min.js' type='text/javascript'></script><script src='javascript/fitnesse.js' type='text/javascript'></script></head><body><header><h2>PlugIns.JdbcSlim.UserGuide.7UsingSqlInScriptsAndScenarios.SymbolAssignmentOfResults</h2></header><article><h2><a href="PlugIns.html">PlugIns</a>
<a href="PlugIns.JdbcSlim.html">JdbcSlim</a>
<a href="PlugIns.JdbcSlim.UserGuide.html">UserGuide</a>
<a href="PlugIns.JdbcSlim.UserGuide.7UsingSqlInScriptsAndScenarios.html">7UsingSqlInScriptsAndScenarios</a>
</h2></br><br/><div class="contents">
	<b>Contents:</b>
	<ul class="toc1"/>
</div>
<br/><br/>This page calls the SQL Command fixture in a scenario<br/>Results returned are assigned to symbols and can be used in future queries or fixtures.<br/><br/><div class="collapsible closed"><ul><li><a href='#' class='expandall'>Expand</a></li><li><a href='#' class='collapseall'>Collapse</a></li></ul>
	<p class="title">setup</p>
	<div><br/><br/><table>
	<tr>
		<td>import</td>
	</tr>
	<tr>
		<td>fitnesse.slim.test</td>
	</tr>
</table>
<br/><table>
	<tr>
		<td>library</td>
	</tr>
	<tr>
		<td>echo script</td>
	</tr>
</table>
<br/><br/></div>
</div>
<br/><br/><h5>Assign results from a query to symbols</h5>
<table>
	<tr>
		<td>SQLCommand</td>
		<td>TestDatabase</td>
		<td>select Id, Name from TestData where ID = '%X%'</td>
	</tr>
	<tr>
		<td>X</td>
		<td>ID?</td>
		<td>NAME?</td>
	</tr>
	<tr>
		<td>2</td>
		<td>&lt;= 3</td>
		<td>$Name2=</td>
	</tr>
	<tr>
		<td>4</td>
		<td>&gt;= 4</td>
		<td>$Name4=</td>
	</tr>
	<tr>
		<td>2</td>
		<td>1&lt;_ &lt;3</td>
		<td>Ben</td>
	</tr>
	<tr>
		<td>3</td>
		<td>$Id3=</td>
		<td></td>
	</tr>
</table>
<br/><table>
	<tr>
		<td colspan="4">script</td>
	</tr>
	<tr>
		<td>check</td>
		<td>echo</td>
		<td>$Name2</td>
		<td>Ben</td>
	</tr>
	<tr>
		<td>check</td>
		<td>echo</td>
		<td>$Name4</td>
		<td>Till</td>
	</tr>
	<tr>
		<td>check</td>
		<td>echo</td>
		<td>$Id3</td>
		<td>3</td>
	</tr>
</table>
 <br/><table>
	<tr>
		<td>Define Properties</td>
		<td>DefinitionOne</td>
	</tr>
	<tr>
		<td>key</td>
		<td>value</td>
	</tr>
	<tr>
		<td>cmd</td>
		<td>select * from Elements where ID = '%X%'</td>
	</tr>
	<tr>
		<td>.include</td>
		<td>TestDatabase</td>
	</tr>
</table>
<br/><br/><br/><br/><br/><h1>Scenario with two execute statements returning the result in symbols</h1>
<table>
	<tr>
		<td>Scenario</td>
		<td>TheId</td>
		<td>id</td>
		<td>isNamed</td>
		<td>name</td>
		<td>andHasPhone</td>
		<td>phone</td>
	</tr>
	<tr>
		<td>execute</td>
		<td colspan="6">select * from TestData where ID = '@id'</td>
	</tr>
	<tr>
		<td>show</td>
		<td colspan="6">success</td>
	</tr>
	<tr>
		<td>show</td>
		<td colspan="6">rawResult</td>
	</tr>
	<tr>
		<td>show</td>
		<td colspan="6">resultSheet</td>
	</tr>
	<tr>
		<td>$name=</td>
		<td>getColumnValueByName</td>
		<td>Name</td>
		<td colspan="4"></td>
	</tr>
	<tr>
		<td colspan="7">#</td>
	</tr>
	<tr>
		<td>execute</td>
		<td colspan="6">select * from TestData where ID = '@id'</td>
	</tr>
	<tr>
		<td>show</td>
		<td colspan="6">success</td>
	</tr>
	<tr>
		<td>show</td>
		<td colspan="6">rawResult</td>
	</tr>
	<tr>
		<td>show</td>
		<td colspan="6">resultSheet</td>
	</tr>
	<tr>
		<td>$phone=</td>
		<td>getColumnValueByName</td>
		<td>Phone</td>
		<td colspan="4"></td>
	</tr>
</table>
<br/><br/><br/><h1>Start the test</h1>
<h3>Open a connection</h3>
<table>
	<tr>
		<td>Script</td>
		<td>SQLCommand</td>
		<td>DefinitionOne</td>
	</tr>
	<tr>
		<td colspan="3">openConnection</td>
	</tr>
</table>
<br/><br/><h3>Call the scenario</h3>
<br/><table>
	<tr>
		<td colspan="3">TheIdIsNamedAndHasPhone</td>
	</tr>
	<tr>
		<td>id</td>
		<td>name?</td>
		<td>phone?</td>
	</tr>
	<tr>
		<td>2</td>
		<td>$Name2=</td>
		<td>&gt;0</td>
	</tr>
	<tr>
		<td>4</td>
		<td>$Name44=</td>
		<td>&gt;100</td>
	</tr>
	<tr>
		<td>3</td>
		<td>Tom</td>
		<td>$Phone3=</td>
	</tr>
	<tr>
		<td>2</td>
		<td>=~/Be/</td>
		<td>&gt;5</td>
	</tr>
</table>
<br/><table>
	<tr>
		<td colspan="4">script</td>
	</tr>
	<tr>
		<td>check</td>
		<td>echo</td>
		<td>$Name2</td>
		<td>Ben</td>
	</tr>
	<tr>
		<td>check</td>
		<td>echo</td>
		<td>$Name44</td>
		<td>Till</td>
	</tr>
	<tr>
		<td>check</td>
		<td>echo</td>
		<td>$Phone3</td>
		<td>4567890</td>
	</tr>
</table>
<br/><br/><h3>Close the connection</h3>
<table>
	<tr>
		<td>Script</td>
	</tr>
	<tr>
		<td>closeConnection</td>
	</tr>
</table>
</article></body></html>