<html><head><title>PlugIns.JdbcSlim.UserGuide.9NullTrailingSpacesAndEmptyStrings</title><meta http-equiv='Content-Type' content='text/html;charset=UTF-8'/><link rel='stylesheet' type='text/css' href='css/fitnesse.css'/><script src='javascript/jquery-1.11.3.min.js' type='text/javascript'></script><script src='javascript/fitnesse.js' type='text/javascript'></script></head><body><header><h2>PlugIns.JdbcSlim.UserGuide.9NullTrailingSpacesAndEmptyStrings</h2></header><article><h2><a href="PlugIns.html">PlugIns</a>
<a href="PlugIns.JdbcSlim.html">JdbcSlim</a>
<a href="PlugIns.JdbcSlim.UserGuide.html">UserGuide</a>
</h2></br><br/><br/><h4>To insert or update <b>null</b> values define input parameters and use "?" syntax.</h4>
Specify null as <b>#null#</b><br/><br/><h4>To insert leading and trailing Spaces use the <b>!- text -!</b> syntax</h4>
The text <i>Denver</i> below has 5 leading and two trailing spaces<br/>The text <i>Bob</i> below has 5 trailing spaces<br/><br/>Inline Parameter<br/><br/><table>
	<tr>
		<td>SQLCommand</td>
		<td>TestDatabase</td>
		<td>insert into TestData
values (DEFAULT, ?{Name:12=more}, '%Phone%', '%City%', '%Profession%')</td>
		<td colspan="3">dbgetgeneratedkeys 
</td>
	</tr>
	<tr>
		<td>SCOPE_IDENTITY()?</td>
		<td>City</td>
		<td>Name</td>
		<td>Phone</td>
		<td>Profession</td>
		<td>Count?</td>
	</tr>
	<tr>
		<td>$ID3=</td>
		<td>Paris</td>
		<td>#null#</td>
		<td>112</td>
		<td></td>
		<td>1</td>
	</tr>
	<tr>
		<td>$ID2=</td>
		<td>     Denver  </td>
		<td>Bob     </td>
		<td>6789</td>
		<td></td>
		<td>1</td>
	</tr>
</table>
<br/><div class="collapsible"><ul><li><a href='#' class='expandall'>Expand</a></li><li><a href='#' class='collapseall'>Collapse</a></li></ul>
	<p class="title">Alternative locations for null</p>
	<div><br/>Inline default value as null<br/>Inline default value with leading and trailing spaces<br/><br/><table>
	<tr>
		<td>SQLCommand</td>
		<td>TestDatabase</td>
		<td>insert into TestData
values (DEFAULT, ?{Name:12=#null#}, '%Phone%', ?{City:12= Kathmandu }, '%Profession%')</td>
		<td>dbgetgeneratedkeys 
</td>
	</tr>
	<tr>
		<td>SCOPE_IDENTITY()?</td>
		<td>Phone</td>
		<td>Profession</td>
		<td>Count?</td>
	</tr>
	<tr>
		<td>$ID4=</td>
		<td>009771</td>
		<td>Sherpa</td>
		<td>1</td>
	</tr>
</table>
<br/>Parameters in Properties<br/><br/><table>
	<tr>
		<td>Define Properties</td>
		<td>inParameters</td>
	</tr>
	<tr>
		<td>key</td>
		<td>value</td>
	</tr>
	<tr>
		<td>Name</td>
		<td>I:1:12:0</td>
	</tr>
	<tr>
		<td>City</td>
		<td>I:2:12:0</td>
	</tr>
</table>
<br/><table>
	<tr>
		<td>SQLCommand</td>
		<td>TestDatabase</td>
		<td>insert into TestData
values (DEFAULT, ?, '%Phone%', ?, '%Profession%')</td>
		<td colspan="3">dbgetgeneratedkeys 
dbQueryParameters=inParameters</td>
	</tr>
	<tr>
		<td>SCOPE_IDENTITY()?</td>
		<td>City</td>
		<td>Name</td>
		<td>Phone</td>
		<td>Profession</td>
		<td>Count?</td>
	</tr>
	<tr>
		<td>$ID1=</td>
		<td>Berlin</td>
		<td>#null#</td>
		<td>12345</td>
		<td></td>
		<td>1</td>
	</tr>
</table>
<br/>null as default in Properties<br/>leading and trailing spaces are lost!<br/><br/><table>
	<tr>
		<td>Define Properties</td>
		<td>myDefaults</td>
	</tr>
	<tr>
		<td>key</td>
		<td>value</td>
	</tr>
	<tr>
		<td>Name</td>
		<td>#null#</td>
	</tr>
	<tr>
		<td>City</td>
		<td> Pune </td>
	</tr>
</table>
<br/><table>
	<tr>
		<td>SQLCommand</td>
		<td>TestDatabase</td>
		<td>insert into TestData
values (DEFAULT, ?, '%Phone%', ?, '%Profession%')</td>
		<td>dbgetgeneratedkeys 
dbQueryParameters=inParameters 
inputDefaults=myDefaults</td>
	</tr>
	<tr>
		<td>SCOPE_IDENTITY()?</td>
		<td>Phone</td>
		<td>Profession</td>
		<td>Count?</td>
	</tr>
	<tr>
		<td>$ID0=</td>
		<td>0091</td>
		<td></td>
		<td>1</td>
	</tr>
</table>
<br/></div>
</div>
<h4>To test  <b>null</b> values in output specify null as <b>#null#</b></h4>
<h4>To test leading and trailing spaces use the <b>!- text </b><b>-!</b> syntax or regex <i>'=~/\A text \z/</i></h4>
<h4>To test for an empty string use regex <b>=~/\A\z/</b></h4>
<p class="note">Define this pattern in a variable it will likely changes in the future to something more readable</p><span class="meta">variable defined: EmptyString==~/\A\z/</span>
<br/><table>
	<tr>
		<td>SQLCommand</td>
		<td>TestDatabase</td>
		<td colspan="4">select City, Name, length(City) as CityLength, length(Name) as NameLength, Profession from  TestData where ID ='%ID%'</td>
	</tr>
	<tr>
		<td>ID</td>
		<td>City?</td>
		<td>CityLength?</td>
		<td>Name?</td>
		<td>NameLength?</td>
		<td>Profession?</td>
	</tr>
	<tr>
		<td>$ID1</td>
		<td>=~/\ABerlin\z/</td>
		<td>6</td>
		<td>#null#</td>
		<td>#null#</td>
		<td></td>
	</tr>
	<tr>
		<td>$ID2</td>
		<td>=~/\A     Denver  \z/</td>
		<td>13</td>
		<td>Bob     </td>
		<td>8</td>
		<td>=~/\A\z/</td>
	</tr>
	<tr>
		<td>$ID3</td>
		<td>=~/\AParis\z/</td>
		<td>5</td>
		<td>#null#</td>
		<td>#null#</td>
		<td></td>
	</tr>
	<tr>
		<td>$ID4</td>
		<td> Kathmandu </td>
		<td>11</td>
		<td>#null#</td>
		<td>#null#</td>
		<td>Sherpa</td>
	</tr>
	<tr>
		<td>$ID0</td>
		<td>Pune</td>
		<td>4</td>
		<td>#null#</td>
		<td>#null#</td>
		<td></td>
	</tr>
</table>
<br/><h2>Configuration options</h2>
<h4>if you must insert the string #null# in the database you can define a different null pattern with the property <b>inputNullString</b></h4>
<table>
	<tr>
		<td>Define Properties</td>
		<td>inParameters</td>
	</tr>
	<tr>
		<td>key</td>
		<td>value</td>
	</tr>
	<tr>
		<td>Name</td>
		<td>I:1:12:0</td>
	</tr>
	<tr>
		<td>City</td>
		<td>I:2:12:0</td>
	</tr>
</table>
<br/><table>
	<tr>
		<td>SQLCommand</td>
		<td>TestDatabase</td>
		<td>update TestData set Name = ?{Name:12}, City = ? where ID ='%ID%'</td>
		<td>inputNullString=--null-- 
dbQueryParameters=inParameters</td>
	</tr>
	<tr>
		<td>ID</td>
		<td>City</td>
		<td>Name</td>
		<td>Count?</td>
	</tr>
	<tr>
		<td>$ID2</td>
		<td>--null--</td>
		<td>#null#</td>
		<td>1</td>
	</tr>
</table>
<br/><table>
	<tr>
		<td>SQLCommand</td>
		<td>TestDatabase</td>
		<td colspan="3">select City, Name, length(City) as CityLength, length(Name) as NameLength  from  TestData where ID ='%ID%'</td>
	</tr>
	<tr>
		<td>ID</td>
		<td>City?</td>
		<td>CityLength?</td>
		<td>Name?</td>
		<td>NameLength?</td>
	</tr>
	<tr>
		<td>$ID2</td>
		<td>#null#</td>
		<td>#null#</td>
		<td>#null#</td>
		<td>6</td>
	</tr>
</table>
<br/><h4>You can also change the output format for null values with the property <b>outputNullString</b></h4>
<table>
	<tr>
		<td>SQLCommand</td>
		<td>TestDatabase</td>
		<td>select City, Name, length(City) as CityLength, length(Name) as NameLength  from  TestData where ID ='%ID%'</td>
		<td colspan="2">outputNullString=++null++</td>
	</tr>
	<tr>
		<td>ID</td>
		<td>City?</td>
		<td>CityLength?</td>
		<td>Name?</td>
		<td>NameLength?</td>
	</tr>
	<tr>
		<td>$ID2</td>
		<td>++null++</td>
		<td>++null++</td>
		<td>#null#</td>
		<td>6</td>
	</tr>
</table>
<br/><div class="collapsible invisible"><ul><li><a href='#' class='expandall'>Expand</a></li><li><a href='#' class='collapseall'>Collapse</a></li></ul>
	<p class="title">Cleanup</p>
	<div><br/><table>
	<tr>
		<td>SQLCommand</td>
		<td>TestDatabase</td>
		<td>delete TestData  where ID ='%ID%'</td>
	</tr>
	<tr>
		<td>ID</td>
		<td colspan="2">Count?</td>
	</tr>
	<tr>
		<td>$ID0</td>
		<td colspan="2">1</td>
	</tr>
	<tr>
		<td>$ID1</td>
		<td colspan="2">1</td>
	</tr>
	<tr>
		<td>$ID2</td>
		<td colspan="2">1</td>
	</tr>
	<tr>
		<td>$ID3</td>
		<td colspan="2">1</td>
	</tr>
	<tr>
		<td>$ID4</td>
		<td colspan="2">1</td>
	</tr>
</table>
<br/></div>
</div>
<div class="contents">
	<b>Contents:</b>
	<ul class="toc1"/>
</div>
<br/></article></body></html>